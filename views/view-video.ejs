<%- include('partials/header') %>

<div class="container" style="max-width: 1000px;">
    <div style="margin-bottom: 2rem;">
        <a href="javascript:history.back()" class="btn btn-outline" style="margin-bottom: 1rem;">&larr; Back</a>
        <h1 style="margin-bottom: 0.5rem;"><%= resource.title %></h1>
        <p style="color: var(--text-muted);"><%= resource.description %></p>
    </div>

    <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #000; box-shadow: var(--shadow); border: 1px solid rgba(255,255,255,0.1);">
        <% if (ytId) { %>
            <iframe 
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                src="https://www.youtube.com/embed/<%= ytId %>?autoplay=1&rel=0" 
                title="<%= resource.title %>" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                allowfullscreen>
            </iframe>
        <% } else if (ytPlaylistId) { %>
            <iframe 
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                src="https://www.youtube.com/embed/videoseries?list=<%= ytPlaylistId %>&autoplay=1" 
                title="<%= resource.title %>" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                allowfullscreen>
            </iframe>
        <% } else { %>
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                <ion-icon name="alert-circle-outline" style="font-size: 3rem; color: var(--danger);"></ion-icon>
                <p>Invalid Video URL or Format</p>
                <a href="<%= resource.url %>" target="_blank" class="btn btn-primary" style="margin-top: 1rem;">Open Original Link</a>
            </div>
        <% } %>
    </div>

    <div style="margin-top: 2rem; padding: 2rem; background: var(--bg-card); border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
        <h3>Resource Details</h3>
        <p style="margin-top: 1rem; color: var(--text-muted);"><strong>Category:</strong> <%= resource.category %></p>
        <p style="color: var(--text-muted);"><strong>Type:</strong> Video Lecture</p>
        <a href="<%= resource.url %>" target="_blank" style="display: inline-block; margin-top: 1rem; color: var(--primary); font-size: 0.9rem;">
            Watch on YouTube directly <ion-icon name="open-outline" style="vertical-align: middle;"></ion-icon>
        </a>
    </div>
</div>

<%- include('partials/footer') %>
